# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Plasma NextJS Template is a premium Next.js 15 template built with the App Router, Tailwind CSS 4, and shadcn/ui. It includes documentation powered by Fumadocs and supports static export by default.

**Tech Stack:**
- Next.js 15 (App Router)
- React 19
- TypeScript
- Tailwind CSS 4
- shadcn/ui components
- Fumadocs (documentation system)
- Orama (client-side search)

## Development Commands

```bash
# Install dependencies (uses pnpm)
pnpm install

# Run development server (also runs postinstall to generate fumadocs-mdx)
pnpm dev

# Build for production (outputs to 'out' directory for static export)
pnpm build

# Start production server
pnpm start

# Lint code
pnpm lint
```

**Note:** The `postinstall` script runs `fumadocs-mdx` automatically to generate the `.source` directory from MDX content.

## Architecture

### App Structure

- **App Router:** Uses Next.js 15 App Router pattern (`src/app/`)
- **Static Export:** Configured for static site generation (SSG) by default
- **Documentation:** Fumadocs-powered docs system at `/docs` route

### Key Directories

- `src/app/` - App Router pages and layouts
  - `(auth)/` - Route group for authentication pages (signin, signup, otp)
  - `docs/` - Documentation pages with dynamic `[[...slug]]` routing
  - `api/search/` - Static search API for documentation
- `src/components/` - Reusable React components
  - `ui/` - shadcn/ui base components (ESLint ignored)
  - `magicui/` - Magic UI animation components (ESLint ignored)
  - `sections/` - Landing page sections
  - `layout/` - Layout components (navbar, footer, banner)
  - `docs/` - Documentation-specific components
- `src/lib/` - Utility functions and shared logic
- `content/` - MDX documentation content
  - `content/docs/` - Documentation pages
  - `content/changelog/` - Changelog entries

### Documentation System (Fumadocs)

The template uses Fumadocs for documentation with **static search** enabled by default:

1. **Content Source:** MDX files in `content/docs/` configured via `source.config.ts`
2. **Build Process:** `fumadocs-mdx` generates `.source` directory at build/dev time
3. **Search Implementation:**
   - `src/app/api/search/route.ts` uses `staticGET` to generate search indexes at build time
   - `src/components/docs/overview.tsx` uses `useDocsSearch` with `type: 'static'`
   - `src/app/layout.tsx` RootProvider configured with `search.options.type: 'static'`
4. **Client-side Search:** Uses Orama for browser-based search (compatible with static export)

**Static vs Server Search Trade-offs:**
- Default (static): Works with static export, slower initial load, compatible with any static host
- Optional (server): Requires Node.js server, faster search, NOT compatible with static export

### Path Aliases

TypeScript paths configured in `tsconfig.json`:
- `@/*` → `./src/*`
- `@/.source` → `./.source` (generated by fumadocs-mdx)
- `@/mdx-components` → `./mdx-components`

### Styling

- **Tailwind CSS 4** with custom configuration
- **CSS Variables:** Theme colors defined via CSS variables
- **Fonts:** Inter (primary) and Azeret Mono (monospace) from Google Fonts
- **Dark Mode:** Default theme is dark, managed by `next-themes`

### Layout System

Global layout (`src/app/layout.tsx`) includes:
- Theme provider (dark mode by default)
- RootProvider (Fumadocs search configuration)
- Background effects (blur + noise texture)
- StyleGlide provider (for component previews)
- Banner, Navbar, and Footer components

## Code Quality

### ESLint Configuration

- Extends Next.js TypeScript config
- **Ignored directories:** `src/components/ui/**`, `src/components/magicui/**`, `.source/**`
- **Import sorting:** Uses `eslint-plugin-simple-import-sort` (enforced as error)

### Prettier Configuration

- Single quotes, semicolons, 2-space tabs
- Tailwind CSS class sorting via `prettier-plugin-tailwindcss`
- Line width: 80 characters

### Import Sorting

Imports must be sorted using `simple-import-sort` plugin. Run `pnpm lint` to check.

## Static Export Notes

The template is configured for static export by default:

1. Build output goes to `out/` directory
2. Search functionality uses static client-side indexes
3. Compatible with Cloudflare Pages, GitHub Pages, Vercel, etc.
4. To switch to server-side rendering, see README.md "Optional: Server-Side Search" section

## Common Patterns

### Adding New Documentation Pages

1. Create MDX file in `content/docs/`
2. Include frontmatter (title, description)
3. Run `pnpm dev` to regenerate `.source` directory
4. Page automatically available at `/docs/[filename]`

### Adding New UI Components

1. Use shadcn/ui CLI to add components to `src/components/ui/`
2. These components are ESLint-ignored by default
3. Customize in separate files or extend in `src/components/`

### Adding Landing Page Sections

Create new section components in `src/components/sections/` and import in page files.
